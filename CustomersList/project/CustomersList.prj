{"parameters":{"name":"CustomersList.prj","tag":"div","text":"","custom-params":"[{\"name\":\"open\",\"value\":\"true\",\"type\":\"boolean\"},{\"name\":null,\"value\":null,\"type\":null},{\"name\":null,\"value\":null,\"type\":null},{\"name\":null,\"value\":null,\"type\":null},{\"name\":null,\"value\":null,\"type\":null},{\"name\":null,\"value\":null,\"type\":null},{\"name\":null,\"value\":null,\"type\":null},{\"name\":null,\"value\":null,\"type\":null}]"},"children":[{"parameters":{"name":"container","class":"-fluid container-fluid","exposeAs":"list","fluid":"true"},"children":[{"parameters":{"name":"Row_2","class":"row"},"children":[{"parameters":{"name":"Col","class":"col"},"children":[{"parameters":{"name":"title","class":"ml-4 my-4","tag":"h2","text":"Customers"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:p"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:column"},{"parameters":{"name":"Col_1","class":"col"},"children":[{"parameters":{"name":"btnAdd","class":"btn  mt-4 mr-4 btn-primary","label":"Add Customer","context":"primary","type":"button"},"children":[],"events":[{"type":"click","source":"$scope.list.setStyle('display', 'none');\r\n$scope.createcustomer.setStyle('display',null);\r\n$scope.createcustomer.set('new', 'true');","name":"btnAdd"}],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:button"}],"events":[],"macros":[],"styles":{"text-align":"right"},"dependencies":[],"impl":"bootstrap:column"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:row"},{"parameters":{"name":"Row_1","class":"row"},"children":[{"parameters":{"name":"Col","class":"col"},"children":[{"parameters":{"name":"card","class":"card","tag":"div","text":""},"children":[{"parameters":{"name":"card-body","class":"card-body","tag":"div","text":""},"children":[{"parameters":{"name":"Row","class":"row"},"children":[{"parameters":{"name":"tabs","class":"nav","tag":"ul","decorate-class":"nav-item"},"children":[{"parameters":{"name":"all","class":"nav-link active","text":"All","href":"javascript:void(0);"},"children":[],"events":[{"type":"click","source":"$scope.customers.query({});","name":"all"}],"macros":[],"styles":{},"dependencies":[],"impl":"html:a"},{"parameters":{"name":"new","class":"nav-link","text":"New","href":"javascript:void(0);"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:a"},{"parameters":{"name":"returning","class":"nav-link active","text":"Returning","href":"javascript:void(0);"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:a"},{"parameters":{"name":"emailSubscribers","class":"nav-link active","text":"Email subscribers","href":"javascript:void(0);"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:a"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:ul"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:row"},{"parameters":{"name":"Row_1","class":"row"},"children":[{"parameters":{"name":"Col","class":"col"},"children":[{"parameters":{"name":"Ruler"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:hr"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:column"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:row"},{"parameters":{"name":"Row_3","class":"row"},"children":[{"parameters":{"name":"Input Group","class":"input-group mx-4 my-4","prepend":"true","append":"true"},"children":[{"parameters":{"name":"prepend","class":"input-group-prepend"},"children":[{"parameters":{"name":"TextItem","class":"input-group-text","tag":"p","text":"Filter"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:p"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:input-group-prepend"},{"parameters":{"name":"controls","class":"input-group-controls"},"children":[{"parameters":{"name":"String Input","class":"form-control","type":"text"},"children":[],"events":[],"macros":[],"styles":{"border-top-left-radius":"0","border-bottom-left-radius":"0"},"dependencies":[],"impl":"bootstrap:input-string"}],"events":[],"macros":[],"styles":{"flex":"auto"},"dependencies":[],"impl":"bootstrap:input-group-controls"},{"parameters":{"name":"append","class":"input-group-append"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:input-group-append"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:input-group"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:row"},{"parameters":{"name":"Row_2","class":"row"},"children":[{"parameters":{"name":"Col","class":"col table-responsive"},"children":[{"parameters":{"name":"Table","class":"table customer-table","exposeAs":"table","IdField":"_id","fireRowSelectionOn":"click","rowSelectionMode":"radio","selectedRowDecoratorClass":"table-active"},"children":[{"parameters":{"name":"image","label":"Image","binding":"image","dataType":"text","renderAs":"image"},"children":[],"events":[],"macros":[],"styles":{"width":"96px"},"dependencies":[],"impl":"bootstrap:table-column"},{"parameters":{"name":"sequence","label":"Customer Id","binding":"sequence","dataType":"numeric","renderAs":"link"},"children":[],"events":[],"macros":[],"styles":{"width":"200px"},"dependencies":[],"impl":"bootstrap:table-column"},{"parameters":{"name":"details","label":"Customer Details","binding":"details","dataType":"text","renderAs":"default"},"children":[],"events":[],"macros":[],"styles":{"width":"200px"},"dependencies":[],"impl":"bootstrap:table-column"},{"parameters":{"name":"orders","label":"Orders","binding":"orders","dataType":"numeric","renderAs":"default"},"children":[],"events":[],"macros":[],"styles":{"width":"100px"},"dependencies":[],"impl":"bootstrap:table-column"},{"parameters":{"name":"totalSpent","label":"Spent","binding":"spent","dataType":"currency","renderAs":"default"},"children":[],"events":[],"macros":[],"styles":{"width":"100px"},"dependencies":[],"impl":"bootstrap:table-column"},{"parameters":{"name":"onlineStatus","label":"Status","binding":"onlineStatus","dataType":"text","renderAs":"default"},"children":[],"events":[],"macros":[],"styles":{"width":"100px"},"dependencies":[],"impl":"bootstrap:table-column"}],"events":[{"type":"renderCell","source":"if(evt.colIndex === 0){\r\n    if(!evt.value || evt.value === null || evt.value === ''){\r\n        evt.source.setAttribute('src','http://www.mhcsa.org.au/wp-content/uploads/2016/08/default-non-user-no-photo.jpg');\r\n    }\r\n    \r\n    \r\n}else if(evt.colIndex === 1){\r\n    evt.source.setHtml('#' + evt.value);\r\n}\r\nelse if(evt.colIndex === 2){\r\n    var data = evt.data;\r\n    var detail = data.firstName + ' ' + data.lastName + ' <br>' + data.postalCode + ', ' + data.street + ' ' + data.city + '<br>' + data.address + ' ' + data.region + ' ' + data.country;\r\n    evt.source.setHtml(detail);\r\n\r\n}else if(evt.colIndex === 3){\r\n    if(!evt.value || evt.value == null || evt.value === ''){\r\n        evt.data.orders = 0;\r\n    }\r\n\r\n    evt.source.setHtml(evt.data.orders + ' Orders');\r\n}else if(evt.colIndex === 4){\r\n    if(!evt.value || evt.value == null || evt.value === ''){\r\n        evt.data.spent = 0;\r\n    }\r\n\r\n    evt.source.setHtml(evt.data.spent + ' MUR Spent');\r\n}else if(evt.colIndex === 5){\r\n    var value = evt.value;\r\n    //<span class=\"badge badge-pill badge-primary\">Primary</span>\r\n    evt.source.addClass('badge badge-pill');\r\n    if(value === 'archived'){\r\n        evt.source.addClass('badge-danger');\r\n        evt.source.setHtml('Archived');\r\n    }else if(value === 'published'){\r\n         evt.source.addClass('badge-primary');\r\n         evt.source.setHtml('Online');\r\n    }else{\r\n        evt.source.setHtml('Offline');\r\n         evt.source.addClass('badge-warning');\r\n    }\r\n}\r\n\r\n","name":"Table"},{"type":"linkAction","source":"\r\n\r\n$scope.list.setStyle('display', 'none');\r\n$scope.createcustomer.setStyle('display',null);\r\n$scope.createcustomer.set('data', JSON.stringify(evt.data));","name":"Table"}],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:table"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:column"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:row"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:div"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:div"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:column"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:row"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:container"},{"parameters":{"name":"resource"},"children":[{"parameters":{"name":"bootstrapJS","src":"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:javascript"},{"parameters":{"name":"popperJS","src":"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:javascript"},{"parameters":{"name":"bootstrapCSS","source":"https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css","crossorigin":"anonymous","media":"all"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:stylesheet"},{"parameters":{"name":"bootstrapPatch","source":"css/bootstrap.patch.css","crossorigin":"anonymous","media":"all"},"children":[],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"html:stylesheet"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"bootstrap:resources"},{"parameters":{"name":"localhost"},"children":[{"parameters":{"name":"beelut"},"children":[{"parameters":{"name":"customers","exposeAs":"customers"},"children":[],"events":[{"type":"queryDocument","source":"$scope.table.setData(evt.data);","name":"customers"}],"macros":[],"styles":{},"dependencies":[],"impl":"mongo:collection"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"mongo:database"}],"events":[],"macros":[],"styles":{},"dependencies":[],"impl":"mongo:server"},{"parameters":{"artifact":"com.archnet:CreateCustomer:0.0.1","name":"createcustomerui","exposeAs":"createcustomer"},"children":[],"events":[{"type":"applyparameter","source":"if(evt.name === 'data'){\r\n    var data = JSON.parse(evt.value);\r\n    $scope.form.setData(data);\r\n  \r\n    $scope.image.getInput().setValue(data.image);\r\n    if(data.onlineStatus === 'published'){\r\n        $scope.btnUnpublish.setStyle('display', null);\r\n        $scope.btnPublish.setStyle('display', 'none');\r\n    }else{\r\n        $scope.btnUnpublish.setStyle('display', 'none');\r\n        $scope.btnPublish.setStyle('display', null);\r\n    }\r\n}else if(evt.name === 'new'){\r\n    $scope.textform.setData({});\r\n    \r\n    $scope.image.getInput().setValue('');\r\n    $scope.btnUnpublish.setStyle('display', 'none');\r\n        $scope.btnPublish.setStyle('display', null);\r\n   \r\n}","name":"createcustomerui"},{"type":"saved","source":"$scope.list.setStyle('display', null);\r\n$scope.createcustomer.setStyle('display','none');\r\n$scope.customers.query({});","name":"createcustomerui"},{"type":"canceled","source":"$scope.list.setStyle('display', null);\r\n$scope.createcustomer.setStyle('display','none');","name":"createcustomerui"}],"macros":[],"styles":{"display":"none"},"dependencies":[],"impl":"html:cmp"}],"events":[{"type":"applyparameter","source":"if(evt.name === 'open'){\r\n    if(evt.value === 'true'){\r\n        $scope.orders.query({});\r\n    }\r\n}","name":"CustomersList.prj"}],"macros":[],"styles":{},"data":{},"dependencies":[],"impl":"lgt:app"}